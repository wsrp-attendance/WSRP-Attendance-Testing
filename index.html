<form id="checkinForm" class="hidden">
  <input type="hidden" name="uid" id="uid">
  <input type="hidden" name="latitude" id="lat">
  <input type="hidden" name="longitude" id="lng">
  <button type="submit">Submit Check-In</button>
</form>

<div id="result" style="margin-top:20px;"></div>

<script>
const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzmn0XCdPt9-cw7VxEiN2lvxd4vbAkR8bKQ81BVabaugH_8cvsxUVWUZJZGBfX6AgSqmg/exec';

const form = document.getElementById('checkinForm');
const resultDiv = document.getElementById('result');

form.addEventListener('submit', function(e) {
  e.preventDefault();

  const formData = new FormData();
  formData.append('uid', document.getElementById('uid').value);
  formData.append('latitude', document.getElementById('lat').value);
  formData.append('longitude', document.getElementById('lng').value);

  resultDiv.textContent = 'Submitting...';

  fetch(SCRIPT_URL, {
    method: 'POST',
    body: formData,
    mode: 'cors'
  })
  .then(response => response.text())
  .then(html => {
    resultDiv.innerHTML = html;
    form.style.display = 'none'; // hide form after submission
  })
  .catch(err => {
    resultDiv.textContent = 'Submission failed: ' + err.message;
  });
});
</script>
